<!DOCTYPE html>
<html>
<head>
    <title>Location Logger</title>
</head>
<body onload="displayHistory()">
    <h2>Location Logger</h2>
    <button onclick="getLocation()">Get My Location</button>
    
    <div id="current"></div>
    <h3>Location History (Last 5)</h3>
    <ul id="history"></ul>

    <script>
        function getLocation() {
            if (navigator.geolocation) {
                
                navigator.geolocation.getCurrentPosition(showPosition, showError);
            } else {
                alert("Geolocation is not supported by this browser.");
            }
        }

        function showPosition(position) {
            const lat = position.coords.latitude;
            const lon = position.coords.longitude;
            
            
            document.getElementById('current').innerHTML = `Latitude: ${lat}<br>Longitude: ${lon}`;
            
            saveToHistory({ lat, lon, time: new Date().toLocaleString() });
        }

        function showError(error) {
            
            switch(error.code) {
                case error.PERMISSION_DENIED: alert("User denied the request for Geolocation."); break;
                case error.POSITION_UNAVAILABLE: alert("Location information is unavailable."); break;
                case error.TIMEOUT: alert("The request to get user location timed out."); break;
            }
        }

        function saveToHistory(entry) {
            
            let history = JSON.parse(localStorage.getItem('locHistory')) || [];
            history.unshift(entry);
            if (history.length > 5) history.pop();
            localStorage.setItem('locHistory', JSON.stringify(history));
            displayHistory();
        }

        function displayHistory() {
            const history = JSON.parse(localStorage.getItem('locHistory')) || [];
            const list = document.getElementById('history');
            list.innerHTML = history.map(h => `<li>${h.time}: ${h.lat}, ${h.lon}</li>`).join('');
        }
    </script>
</body>
</html>